<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2P Energy Trading Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/styles/main.css">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loadingScreen" class="loading-screen">
            <div class="loading-content">
                <div class="loading-logo">
                    <div class="energy-icon"></div>
                </div>
                <h2>P2P Energy Trading Platform</h2>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <p>Connecting to the energy grid...</p>
            </div>
        </div>

        <!-- Login/Demo Screen -->
        <div id="authScreen" class="auth-screen hidden">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="platform-logo">
                        <div class="energy-icon"></div>
                        <h1>Energy Grid</h1>
                    </div>
                    <p class="platform-subtitle">Peer-to-Peer Energy Trading Platform</p>
                </div>
                
                <div class="auth-options">
                    <button id="demoBtn" class="btn btn-primary btn-large">
                        <span class="btn-icon">‚ö°</span>
                        Try Demo Account
                    </button>
                    
                    <div class="auth-divider">
                        <span>or</span>
                    </div>
                    
                    <div class="auth-form">
                        <input type="text" id="usernameInput" placeholder="Enter username" class="input-field">
                        <button id="joinBtn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">üåê</span>
                            Join Trading Network
                        </button>
                    </div>
                </div>
                
                <div class="platform-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="activeTraders">127</span>
                        <span class="stat-label">Active Traders</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="energyTraded">2.4 MWh</span>
                        <span class="stat-label">Energy Traded Today</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="avgPrice">$0.12</span>
                        <span class="stat-label">Avg Price/kWh</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Game Interface -->
        <div id="gameInterface" class="game-interface hidden">
            <!-- Navigation Header -->
            <header class="game-header">
                <div class="header-left">
                    <div class="platform-logo">
                        <div class="energy-icon"></div>
                        <span>Energy Grid</span>
                    </div>
                    <div class="game-time">
                        <span id="gameDay">Day 1</span>
                        <span id="gameTime">06:00</span>
                    </div>
                </div>
                
                <div class="header-center">
                    <div class="market-status">
                        <div class="status-indicator active"></div>
                        <span>Market Active</span>
                    </div>
                    <div class="current-price">
                        <span id="currentPrice">$0.12</span>
                        <span class="price-unit">/kWh</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="user-info">
                        <span id="userName">Demo User</span>
                        <div class="user-balance">
                            <span id="userBalance">$500.00</span>
                        </div>
                    </div>
                    <button id="pauseBtn" class="btn btn-icon">‚è∏Ô∏è</button>
                    <button id="settingsBtn" class="btn btn-icon">‚öôÔ∏è</button>
                </div>
            </header>

            <!-- Main Content -->
            <main class="game-main">
                <!-- Sidebar -->
                <aside class="game-sidebar">
                    <!-- Participant Info -->
                    <div class="panel participant-panel">
                        <h3>Your Profile</h3>
                        <div class="participant-info">
                            <div class="participant-type">
                                <span id="participantType">Residential Prosumer</span>
                            </div>
                            <div class="participant-assets">
                                <div class="asset-item">
                                    <span class="asset-icon">‚òÄÔ∏è</span>
                                    <span class="asset-name">Solar Panels</span>
                                    <span class="asset-value" id="solarGeneration">8 kW</span>
                                </div>
                                <div class="asset-item">
                                    <span class="asset-icon">üîã</span>
                                    <span class="asset-name">Battery</span>
                                    <span class="asset-value" id="batteryCapacity">15 kWh</span>
                                </div>
                                <div class="asset-item">
                                    <span class="asset-icon">‚ö°</span>
                                    <span class="asset-name">Consumption</span>
                                    <span class="asset-value" id="consumption">12 kW</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="panel quick-actions">
                        <h3>Quick Trade</h3>
                        <div class="trade-form">
                            <div class="trade-type-selector">
                                <button class="trade-type-btn active" data-type="buy">Buy</button>
                                <button class="trade-type-btn" data-type="sell">Sell</button>
                            </div>
                            <input type="number" id="tradeAmount" placeholder="Amount (kWh)" class="input-field">
                            <input type="number" id="tradePrice" placeholder="Price ($/kWh)" class="input-field">
                            <button id="executeTradeBtn" class="btn btn-primary btn-full">Execute Trade</button>
                        </div>
                    </div>

                    <!-- Automation Rules -->
                    <div class="panel automation-panel">
                        <h3>IoT Automation</h3>
                        <div class="automation-rules">
                            <div class="rule-item">
                                <div class="rule-toggle">
                                    <input type="checkbox" id="autoSell" class="toggle-switch">
                                    <label for="autoSell">Auto-sell excess</label>
                                </div>
                                <div class="rule-config">
                                    <span>When price > $</span>
                                    <input type="number" value="0.15" class="rule-input">
                                </div>
                            </div>
                            <div class="rule-item">
                                <div class="rule-toggle">
                                    <input type="checkbox" id="autoBuy" class="toggle-switch">
                                    <label for="autoBuy">Auto-buy cheap</label>
                                </div>
                                <div class="rule-config">
                                    <span>When price < $</span>
                                    <input type="number" value="0.08" class="rule-input">
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Dashboard -->
                <div class="game-content">
                    <!-- Market Overview -->
                    <div class="panel market-panel">
                        <div class="panel-header">
                            <h3>Market Overview</h3>
                            <div class="weather-info">
                                <span id="weatherIcon">‚òÄÔ∏è</span>
                                <span id="weatherCondition">Sunny</span>
                            </div>
                        </div>
                        <div class="market-chart-container">
                            <canvas id="priceChart"></canvas>
                        </div>
                        <div class="market-stats">
                            <div class="stat-card">
                                <span class="stat-label">Supply</span>
                                <span class="stat-value" id="marketSupply">1,250 kWh</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Demand</span>
                                <span class="stat-value" id="marketDemand">1,180 kWh</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Volume</span>
                                <span class="stat-value" id="tradingVolume">340 kWh</span>
                            </div>
                        </div>
                    </div>

                    <!-- Active Orders & Recent Trades -->
                    <div class="panel-row">
                        <div class="panel orders-panel">
                            <h3>Active Orders</h3>
                            <div class="orders-list" id="activeOrders">
                                <!-- Orders will be populated by JS -->
                            </div>
                        </div>
                        
                        <div class="panel trades-panel">
                            <h3>Recent Trades</h3>
                            <div class="trades-list" id="recentTrades">
                                <!-- Trades will be populated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Leaderboard -->
                    <div class="panel leaderboard-panel">
                        <h3>Top Traders</h3>
                        <div class="leaderboard" id="leaderboard">
                            <!-- Leaderboard will be populated by JS -->
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Participant Selection Modal -->
        <div id="participantModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Choose Your Participant Type</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="participant-grid">
                    <div class="participant-card" data-type="residential">
                        <div class="participant-icon">üè†</div>
                        <h3>Residential Prosumer</h3>
                        <div class="participant-description">
                            Small-scale solar and battery storage for home use
                        </div>
                        <div class="participant-stats">
                            <div class="stat">
                                <span class="stat-label">Generation:</span>
                                <span class="stat-value">8 kW</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Battery:</span>
                                <span class="stat-value">15 kWh</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Starting Cash:</span>
                                <span class="stat-value">$500</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="participant-card" data-type="commercial">
                        <div class="participant-icon">üè¢</div>
                        <h3>Commercial Prosumer</h3>
                        <div class="participant-description">
                            Medium-scale renewable energy for business operations
                        </div>
                        <div class="participant-stats">
                            <div class="stat">
                                <span class="stat-label">Generation:</span>
                                <span class="stat-value">150 kW</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Battery:</span>
                                <span class="stat-value">300 kWh</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Starting Cash:</span>
                                <span class="stat-value">$5,000</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="participant-card" data-type="industrial">
                        <div class="participant-icon">üè≠</div>
                        <h3>Industrial Consumer</h3>
                        <div class="participant-description">
                            Large-scale energy consumption with flexible loads
                        </div>
                        <div class="participant-stats">
                            <div class="stat">
                                <span class="stat-label">Generation:</span>
                                <span class="stat-value">50 kW</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Consumption:</span>
                                <span class="stat-value">800 kW</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Starting Cash:</span>
                                <span class="stat-value">$10,000</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="participant-card" data-type="community">
                        <div class="participant-icon">üåç</div>
                        <h3>Energy Community</h3>
                        <div class="participant-description">
                            Community-owned renewable energy infrastructure
                        </div>
                        <div class="participant-stats">
                            <div class="stat">
                                <span class="stat-label">Generation:</span>
                                <span class="stat-value">300 kW</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Battery:</span>
                                <span class="stat-value">500 kWh</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Starting Cash:</span>
                                <span class="stat-value">$2,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifications" class="notifications-container"></div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>
</html>